# 변경 로그

이 파일은 KRW Momentum Radar 프로젝트의 모든 중요한 변경사항을 기록합니다.

형식은 [Keep a Changelog](https://keepachangelog.com/ko/1.0.0/)를 따르며,
이 프로젝트는 [Semantic Versioning](https://semver.org/lang/ko/)을 준수합니다.

## [Unreleased]

### 추가 예정

- 더 많은 국가 시장 지원
- 실시간 알림 기능
- 백테스팅 모듈

## [3.0.2] - 2025-09-12

### 추가

- **FMS 스캔 결과 영구 저장**: `scan_results_YYYYMMDD_HHMMSS.csv` 파일로 스캔 결과 자동 저장
- **동적 후보 리스트 관리**: 종목 추가 시 후순위 종목이 자동으로 후보로 올라오는 기능
- **페이징 시스템**: 10개 제한 해제, 5~30개 선택 가능한 페이징 처리
- **FMS 임계값 필터링**: FMS 2.0 이상 종목만 후보로 표시하는 슬라이더 추가
- **저장된 결과 로드**: 이전 스캔 결과를 언제든지 불러올 수 있는 기능

### 개선

- **UI 리로드 문제 해결**: 종목 추가 시 스캔 결과가 사라지지 않도록 개선
- **Finviz 진행률 표시**: 콘솔에서 실제 진행률 확인 방법 안내 메시지 추가
- **사용자 경험**: 명확한 상태 메시지와 색상 코딩으로 FMS 점수 시각화
- **성능 최적화**: 불필요한 `st.rerun()` 호출 최소화

### 수정

- **스캔 결과 지속성**: 세션 종료 후에도 스캔 결과 유지
- **동적 업데이트**: 종목 추가 시 실시간 후보 리스트 업데이트
- **에러 처리**: 강화된 예외 처리 및 사용자 친화적 메시지

### 변경

- **아키텍처**: 스캔 결과 관리 로직을 `universe_utils.py`로 분리
- **UI/UX**: 페이징 컨트롤과 동적 후보 관리로 사용자 경험 대폭 개선
- **데이터 관리**: FMS 2.0 이상 종목만 저장하여 효율성 향상

## [3.0.1] - 2025-09-10

### 수정

- **유니버스 스캔 결과 정렬**: FMS 순으로 정렬되지 않던 문제 수정
- **버전 일관성**: UI에서 v2.9.1로 표시되던 것을 v3.0으로 통일

## [3.0.0] - 2025-09-10

### 추가

- **모듈화된 유니버스 관리**: `universe_utils.py`로 유니버스 관리 로직 분리
- **실시간 진행률 표시**: 유니버스 업데이트 및 FMS 스캔 과정의 실시간 진행률 표시
- **유니버스 파일 업로드**: CSV 파일을 통한 유니버스 교체 기능 복구
- **진행률 콜백 시스템**: `progress_callback`과 `status_callback`으로 UI 업데이트 최적화

### 개선

- **중복 표시 제거**: 진행률 표시의 중복 문제 해결
- **성능 최적화**: 유니버스 업데이트 과정의 불필요한 대기 시간 제거
- **사용자 경험**: 명확한 진행 상황 표시로 사용자 피드백 개선
- **코드 정리**: 사용하지 않는 코드 제거 및 모듈화 강화

### 변경

- **아키텍처**: 유니버스 관리 로직을 별도 모듈로 분리
- **UI 개선**: 진행률 표시 방식 개선 및 중복 제거
- **파일 구조**: `update_universe.py` 제거, `universe_utils.py` 추가

### 제거

- **로컬 실행 스크립트**: `update_universe.py` 파일 제거
- **중복 코드**: 사용하지 않는 함수 및 변수 제거

## [2.9.2] - 2025-09-10

### 추가

- **관심종목 파일 관리**: CSV 파일 업로드/다운로드 기능
- **유니버스 파일 관리**: 스크린된 유니버스 파일 업로드 기능
- **수동 종목 관리**: 개별 종목 추가/삭제 기능
- **FMS 기반 재평가**: 저성과 종목 자동 식별 및 제거 제안

### 개선

- **UI/UX 대폭 개선**: 좌측 메뉴 계층적 구조로 재구성
- **코드 통일성**: 관심종목 관리 기능을 watchlist_utils.py로 통합
- **에러 처리 강화**: 사용자 친화적인 에러 메시지 및 처리
- **무한루프 방지**: 파일 업로드 시 세션 상태 플래그로 중복 실행 방지

### 수정

- **파일 업데이트**: 관심종목 업로드 시 실제 watchlist.csv 파일 업데이트
- **캐시 무효화**: 관심종목 변경 시 우측 메인 영역 자동 새로고침
- **메뉴 정리**: 중복 타이틀 제거 및 기능별 논리적 그룹핑

## [2.9.1] - 2025-01-03

### 추가

- **레버리지/인버스 ETF 제외 필터링**: 모멘텀의 본질을 흐리는 레버리지형 ETF 자동 제외
- **다양한 레버리지 패턴 인식**: 2X, 3X, 2배, 3배, Inverse, Short, Bear 등 다양한 패턴 지원
- **한국어 레버리지 패턴**: 2배, 3배, 2X배, 3X배 등 한국어 패턴도 인식

### 개선

- **모멘텀 분석 정확도**: 레버리지/인버스 ETF 제외로 순수한 모멘텀 분석 가능
- **스크리닝 품질**: 진정한 의미의 모멘텀 종목만 선별하여 분석 품질 향상
- **사용자 경험**: 모멘텀의 본질을 흐리는 종목들이 자동으로 제외되어 더 정확한 분석 제공

### 변경

- **유니버스 스크리닝**: `update_universe.py`에 레버리지/인버스 ETF 제외 로직 추가
- **필터링 순서**: 기존 필터링 후 레버리지/인버스 ETF 제외 단계 추가

## [2.9.0] - 2025-09-03

### 추가

- **진정한 전체 시장 스캔**: Finviz.com 기반 실시간 유니버스 스크리닝 시스템
- **2단계 추진 로켓 방식**: 사전 필터링 + 온디맨드 FMS 스캔으로 성능 최적화
- **유니버스 스크리닝 스크립트**: `update_universe.py`로 매일 업데이트되는 유망주 목록 생성
- **동적 스크리닝**: 가격 $5+, 거래량 200K+, 1개월 수익률 0%+ 등 다중 필터 적용
- **대규모 데이터 처리**: 8,000+ 종목에서 유망주 후보군 자동 발굴

### 수정

- **스캔 기능 전면 개편**: 하드코딩된 150개 종목에서 실제 전체 시장 스캔으로 전환
- **UI/UX 개선**: "유망주 유니버스 스캔" 명칭으로 기능 명확화
- **캐싱 최적화**: 1시간 캐시로 반복적인 파일 I/O 및 계산 방지
- **에러 처리 강화**: 파일 없음, 네트워크 오류 등 다양한 예외 상황 대응

### 개선

- **성능 최적화**: 사전 스크리닝으로 API 호출 횟수 대폭 감소
- **사용자 경험**: 명확한 안내 문구와 도움말 추가
- **코드 정리**: 불필요한 함수 제거 및 모듈화 개선
- **의존성 관리**: finvizfinance 라이브러리 추가

### 변경

- **아키텍처**: 단일 스캔에서 2단계 분리 스캔으로 전환
- **데이터 소스**: 하드코딩된 목록에서 실시간 Finviz 스크리닝으로 변경
- **파일 구조**: `screened_universe.csv` 추가, `update_universe.py` 스크립트 추가

## [2.8.0] - 2025-09-03

### 추가

- **관심종목 영구 저장 기능**: `watchlist.csv` 파일을 통한 관심종목 영구 저장
- **실시간 포괄적 종목 탐색**: S&P 500, 주요 ETF, 테마 ETF 등 150+ 종목을 실시간으로 스캔
- **중복 제거 최적화**: VOO와 SPY 같은 유사한 ETF들 중 대표적인 것만 선택하여 효율성 극대화
- **진부한 종목 자동 편출 제안**: FMS 하위 25% 종목 자동 식별 및 제거 제안
- **동적 포트폴리오 관리**: 실시간 관심종목 추가/삭제 기능
- **관심종목 관리 UI**: 사이드바에 직관적인 관심종목 관리 인터페이스
- **배치 처리 시스템**: 대량 종목 스캔을 위한 효율적인 배치 처리

### 수정

- **신규종목 탐색 버그 수정**: 일련번호 대신 실제 티커명 표시 문제 해결
- **관심종목 재평가 버그 수정**: 삭제 버튼 클릭 시 expander가 닫히는 문제 해결
- **대시보드 자동 업데이트**: 관심종목 추가/삭제 후 대시보드 즉시 반영
- **UI 개선**: 성공 메시지 제거로 깔끔한 사용자 경험 제공

### 개선

- **모듈화**: `watchlist_utils.py`로 관심종목 관리 로직 분리
- **함수 정의 순서 최적화**: 의존성 순서에 따른 함수 재정렬로 안정성 향상
- **사용자 경험**: 직관적인 UI/UX로 관심종목 관리 간소화
- **성능 최적화**: API 제한을 고려한 배치 처리 및 캐싱
- **에러 처리**: 강화된 예외 처리 및 사용자 친화적 오류 메시지
- **코드 정리**: 중복 함수 제거 및 불필요한 파일 정리

### 변경

- **아키텍처**: 하드코딩된 종목 리스트에서 실시간 포괄적 종목 탐색 시스템으로 전환
- **버전**: v2.7에서 v2.8로 업그레이드
- **기능 확장**: 단순 모니터링 도구에서 탐색 엔진으로 진화
- **파일 구조**: `us_etf_list.csv` 제거, 실시간 종목 목록 생성으로 대체

### 제거

- **고정 ETF 목록**: `us_etf_list.csv` 파일 제거
- **중복 함수**: 중복된 함수 정의들 제거
- **임시 파일**: `__pycache__` 디렉토리 및 임시 파일들 정리

## [2.7.0] - 2024-09-02

### 추가

- FMS(Fast Momentum Score) 설명 박스 추가
- 애니메이션 모드 선택 시 꼬리 길이 자동 조정 (5일)
- 애니메이션 자동 재생 기능
- 꼬리 길이 기본값을 0으로 변경
- 차트 기간 기본값을 3M으로 변경

### 개선

- 수익률-변동성 이동맵의 꼬리 효과 개선
- 정적 모드와 애니메이션 모드 분리
- 연한→진한 그라데이션 꼬리 표시
- 꼬리 길이 설정 옵션 (0~10일)
- 애니메이션 모드에서 프레임마다 꼬리 동시 갱신
- 이동맵 시각화 성능 최적화
- 꼬리 세그먼트 렌더링 개선
- 애니메이션 프레임 처리 최적화

### 변경

- 꼬리 표시 방식 변경 (단색 → 그라데이션)
- 애니메이션 컨트롤 UI 개선
- 꼬리 길이 > 0일 때 과거 시점들(1M ago, Yesterday) 숨김
- 상단 KPI 섹션 제거로 UI 간소화
- 세부보기 차트 범례를 하단 중앙으로 이동

## [2.6.0] - 2024-08-XX

### 추가

- FMS(Fast Momentum Score) 기반 모멘텀 스코어링 시스템
- 다국가 시장 통합 분석 (미국, 한국, 일본)
- KRW 환산 가격 비교 기능
- 1일/5일 가속도 변화량 추적
- 모멘텀 상태 배지 시스템

### 개선

- 데이터 다운로드 성능 최적화
- 캐싱 시스템 개선
- 에러 처리 강화

### 변경

- 기존 단순 수익률 기반에서 FMS 기반으로 전환
- UI 레이아웃 개선

## [2.5.0] - 2024-07-XX

### 추가

- 수익률-변동성 이동맵 기본 기능
- 3개 시점 비교 (1개월 전, 어제, 오늘)
- 이동 경로 시각화

### 개선

- 차트 렌더링 성능 개선
- 데이터 정렬 알고리즘 최적화

## [2.0.0] - 2024-06-XX

### 추가

- Streamlit 기반 웹 애플리케이션으로 전환
- Plotly 기반 인터랙티브 차트
- 실시간 데이터 업데이트
- 다국가 시장 지원

### 변경

- 기존 데스크톱 애플리케이션에서 웹 애플리케이션으로 전환
- UI/UX 완전 재설계

### 제거

- 기존 데스크톱 GUI 컴포넌트

## [1.0.0] - 2024-05-XX

### 추가

- 초기 버전 릴리스
- 기본 모멘텀 분석 기능
- 한국 시장 중심 분석
- 단순 차트 표시

---

## 버전 규칙

### Major (X.0.0)

- 호환성을 깨는 변경사항
- 새로운 아키텍처 도입
- 주요 기능의 완전한 재설계

### Minor (X.Y.0)

- 새로운 기능 추가
- 기존 기능의 개선
- 새로운 시장/지표 추가

### Patch (X.Y.Z)

- 버그 수정
- 성능 개선
- 문서 업데이트
- UI/UX 미세 조정

## 기여자

이 프로젝트에 기여해주신 모든 분들께 감사드립니다:

- [기여자 목록은 GitHub에서 자동으로 관리됩니다]

## 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.
